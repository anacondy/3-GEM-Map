<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>US Election Map 2025</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <style>
        /* --- CSS: VISUAL STYLING --- */

        /* 1. Reset margins to make the map full screen */
        body, html {
            height: 100%;
            margin: 0;
            background-color: #0a0a0a; /* Deep dark background like the screenshot */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* 2. The Map Container */
        #map {
            height: 100vh; /* 100% of the Viewport Height */
            width: 100%;
            background: #111; /* Slightly lighter dark for the map area */
        }

        /* 3. Custom Title Styling (Floating on top) */
        .map-title {
            position: absolute;
            bottom: 50px;
            left: 50px;
            z-index: 1000; /* Ensure it sits ON TOP of the map */
            color: white;
            text-transform: uppercase;
            pointer-events: none; /* Let clicks pass through to the map */
        }
        .map-title h1 {
            font-size: 3rem;
            margin: 0;
            font-weight: 800;
            letter-spacing: -1px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
        }
        .map-title p {
            font-size: 1.2rem;
            color: #aaa;
            margin-top: 5px;
        }

        /* 4. Custom Tooltip (The little popup labels) */
        .custom-tooltip {
            background: transparent;
            border: none;
            box-shadow: none;
            color: #fff;
            font-weight: bold;
            font-size: 14px;
            text-shadow: 0 0 4px #000;
        }

        /* Hide the white square usually behind Leaflet tooltips */
        .leaflet-tooltip-left::before, .leaflet-tooltip-right::before {
            display: none;
        }
    </style>
</head>
<body>

    <div class="map-title">
        <h1>Governor Party Map</h1>
        <p>Current Affiliation (2025)</p>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script>
        // --- JAVASCRIPT: LOGIC ---

        // 1. Initialize the Map
        // We center it on the US (approx lat 37.8, long -96) with zoom level 4
        var map = L.map('map', {
            zoomControl: false, // We will add zoom control manually if needed, but let's keep it clean
            attributionControl: false
        }).setView([37.8, -96], 4);

        // NOTE: We are NOT adding a "Tile Layer" (like Google Maps streets).
        // This keeps the background pure dark for that "Data Viz" look.

        // 2. Data: Political Parties by State (Updated for 2025)
        // 'R' = Republican (Red), 'D' = Democrat (Blue)
        const partyData = {
            "Alabama": "R", "Alaska": "R", "Arizona": "D", "Arkansas": "R", "California": "D",
            "Colorado": "D", "Connecticut": "D", "Delaware": "D", "Florida": "R", "Georgia": "R",
            "Hawaii": "D", "Idaho": "R", "Illinois": "D", "Indiana": "R", "Iowa": "R",
            "Kansas": "D", "Kentucky": "D", "Louisiana": "R", "Maine": "D", "Maryland": "D",
            "Massachusetts": "D", "Michigan": "D", "Minnesota": "D", "Mississippi": "R", "Missouri": "R",
            "Montana": "R", "Nebraska": "R", "Nevada": "R", "New Hampshire": "R", "New Jersey": "D",
            "New Mexico": "D", "New York": "D", "North Carolina": "D", "North Dakota": "R", "Ohio": "R",
            "Oklahoma": "R", "Oregon": "D", "Pennsylvania": "D", "Rhode Island": "D", "South Carolina": "R",
            "South Dakota": "R", "Tennessee": "R", "Texas": "R", "Utah": "R", "Vermont": "R",
            "Virginia": "R", "Washington": "D", "West Virginia": "R", "Wisconsin": "D", "Wyoming": "R"
        };

        // 3. Function to determine color
        function getColor(stateName) {
            const party = partyData[stateName];
            // If Democrat -> Neon Blue, If Republican -> Neon Red
            return party === 'D' ? '#0066ff' :
                   party === 'R' ? '#ff3333' :
                   '#555'; // Grey if unknown
        }

        // 4. Style Function for the States
        function style(feature) {
            return {
                fillColor: getColor(feature.properties.name),
                weight: 2,           // Thickness of the border
                opacity: 1,
                color: 'white',      // Border color (white makes it pop)
                dashArray: '3',      // Dotted lines for a "tech" feel
                fillOpacity: 0.6     // Slight transparency to blend with dark background
            };
        }

        // 5. Interaction: Hover Effects
        function highlightFeature(e) {
            var layer = e.target;

            layer.setStyle({
                weight: 4,
                color: '#fff',
                dashArray: '',
                fillOpacity: 0.9 // Make it brighter on hover
            });

            layer.bringToFront(); // Bring highlighted state to top
        }

        function resetHighlight(e) {
            geojson.resetStyle(e.target);
        }

        function onEachFeature(feature, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight
            });

            // Add a label (Tooltip)
            if (feature.properties && feature.properties.name) {
                layer.bindTooltip(feature.properties.name, {
                    permanent: true,
                    direction: "center",
                    className: "custom-tooltip"
                });
            }
        }

        // 6. Load the GeoJSON Data (US State Boundaries)
        // We fetch this from a reliable public GitHub source
        fetch('https://raw.githubusercontent.com/PublicaMundi/MappingAPI/master/data/geojson/us-states.json')
            .then(response => response.json())
            .then(data => {
                geojson = L.geoJson(data, {
                    style: style,
                    onEachFeature: onEachFeature
                }).addTo(map);
            });

    </script>
</body>
</html>
